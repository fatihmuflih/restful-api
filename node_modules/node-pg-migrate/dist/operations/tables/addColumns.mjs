import { formatLines } from "../../utils";
import { dropColumns } from "./dropColumns";
import { parseColumns } from "./shared";
function addColumns(mOptions) {
  const _add = (tableName, columns, options = {}) => {
    const { ifNotExists } = options;
    const { columns: columnLines, comments: columnComments = [] } = parseColumns(tableName, columns, mOptions);
    const columnsStr = formatLines(
      columnLines,
      `  ADD ${ifNotExists ? "IF NOT EXISTS " : ""}`
    );
    const tableNameStr = mOptions.literal(tableName);
    const alterTableQuery = `ALTER TABLE ${tableNameStr}
${columnsStr};`;
    const columnCommentsStr = columnComments.length > 0 ? `
${columnComments.join("\n")}` : "";
    return `${alterTableQuery}${columnCommentsStr}`;
  };
  _add.reverse = dropColumns(mOptions);
  return _add;
}
export {
  addColumns
};
